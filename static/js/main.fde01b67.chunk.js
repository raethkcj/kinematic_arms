(this.webpackJsonpkinematic_arms=this.webpackJsonpkinematic_arms||[]).push([[0],{24:function(t,e,n){},36:function(t,e,n){t.exports=n(86)},40:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var a=n(4),i=n.n(a),r=n(35),l=n.n(r),o=(n(40),n(18)),s=n(14),c=n(9),u=n(10),h=n(12),m=n(11),p=n(13),d=(n(24),n(16)),g=n(7);window.JOINT_WIDTH=12;var f=function(t){function e(){return Object(c.a)(this,e),Object(h.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.origin.point({x:0,y:0}),e=this.props.origin.point({x:0,y:-window.JOINT_WIDTH/2}),n=this.props.origin.point({x:0,y:+window.JOINT_WIDTH/2}),a=this.props.origin.point({x:this.props.length,y:-window.JOINT_WIDTH/2}),r=this.props.origin.point({x:this.props.length,y:+window.JOINT_WIDTH/2});return i.a.createElement(g.Group,null,i.a.createElement(g.Shape,{sceneFunc:function(t,i){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(a.x,a.y),t.lineTo(r.x,r.y),t.lineTo(n.x,n.y),t.closePath(),t.fillStrokeShape(i)},fill:this.props.fill}),i.a.createElement(g.Circle,{x:t.x,y:t.y,radius:window.JOINT_WIDTH/2,fill:"black"}))}}]),e}(i.a.Component),k=function(t){function e(){return Object(c.a)(this,e),Object(h.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"linksList",value:function(){var t=this,e=new d.Transform,n=this.props.width/2;return e.translate(n,n),this.props.links.map((function(n,a){if(a>0){var r=t.props.links[a-1];e=e.copy().translate(r.length,0)}return e=e.copy().rotate(n.angle),i.a.createElement(f,{key:a,origin:e,length:n.length,fill:n.color})}))}},{key:"render",value:function(){return i.a.createElement(g.Stage,{width:this.props.width,height:this.props.width,onClick:this.props.onClick},i.a.createElement(g.Layer,null,this.linksList()))}}]),e}(i.a.Component);var v=function(t){return i.a.createElement("div",{className:"column"},t.links.map((function(e,n){return i.a.createElement("fieldset",{key:n},i.a.createElement("legend",null,"Link ",n+1),i.a.createElement("div",{className:"row"},i.a.createElement("label",{className:"row"},"Angle",i.a.createElement("input",{type:"range",min:-180,max:180,onChange:t.handleAngleInput,"data-index":n,value:e.angle*(180/Math.PI)})),i.a.createElement("label",{className:"row"},"Length",i.a.createElement("input",{type:"range",min:10,max:100,onChange:t.handleLengthInput,"data-index":n,value:e.length}))))})))},y=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(h.a)(this,Object(m.a)(e).call(this,t))).updateDimensions=function(){n.setState({width:Math.min(document.querySelector("html").clientWidth,500)})},n.addLink=function(){n.state.links.length<10&&n.setState((function(t){return{links:[].concat(Object(s.a)(t.links),[n.newLink()])}}))},n.removeLink=function(){n.state.links.length>1&&n.setState((function(t){return{links:t.links.slice(0,-1)}}))},n.handleAngleInput=function(t){var e=parseInt(t.target.dataset.index),a=t.target.value*(Math.PI/180);n.setAngle(e,a)},n.handleLengthInput=function(t){var e=t.target.value,a=parseInt(t.target.dataset.index);n.setState((function(t){var n=t.links;return{links:[].concat(Object(s.a)(n.slice(0,a)),[Object(o.a)({},n[a],{length:e})],Object(s.a)(n.slice(a+1)))}}))},n.inverseKin=function(t){"number"===typeof n.state.timeoutID&&clearTimeout(n.state.timeoutID);var e=t.target.getStage().getPointerPosition(),a=n.calculateDistance(n.state.links,e),i=Number.MAX_VALUE,r=setTimeout(n.step(e,a,i),0);n.setState({timeoutID:r})},n.step=function(t,e,a){if(e>3&&a>.5){var i=Array(n.state.links.length).fill(0),r=Array(n.state.links.length).fill(0),l=n.state.links.map((function(t){return Object(o.a)({},t)}));l.forEach((function(e,a){e.angle+=Math.PI/180;var o=n.calculateDistance(l,t);e.angle-=Math.PI/180*2;var s=n.calculateDistance(l,t);e.angle+=Math.PI/180;var c=o-s;if(i[a]*c<0){var u=n.state.links[a].angle-Math.PI/180*(r[a]*i[a])/(c-i[a]);n.setAngle(a,u),r[a]=0}else r[a]+=c;i[a]=c;var h=n.state.links[a].angle-r[a]*Math.PI/180;n.setAngle(a,h)})),e=n.calculateDistance(n.state.links,t),a=r.reduce((function(t,e){return Math.max(t,Math.abs(e))}));var s=setTimeout((function(){return n.step(t,e,a)}),5);n.setState({timeoutID:s})}else n.setState({timeoutID:void 0})},n.canvasRef=i.a.createRef(),n.state={width:0,links:Array.from({length:3},(function(){return n.newLink()})),timeoutID:void 0},n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}},{key:"newLink",value:function(){return{length:this.randomLength(),angle:this.randomAngle(),color:this.randomColor()}}},{key:"randomLength",value:function(){return Math.floor(70*Math.random()+30)}},{key:"randomAngle",value:function(){return(Math.floor(180*Math.random())-90)*(Math.PI/180)}},{key:"randomColor",value:function(){return"hsl("+360*Math.random()+",100%,50%)"}},{key:"setAngle",value:function(t,e){e<-Math.PI&&(e=2*Math.PI-e),e>Math.PI&&(e-=2*Math.PI),this.setState((function(n){var a=n.links;return{links:[].concat(Object(s.a)(a.slice(0,t)),[Object(o.a)({},a[t],{angle:e})],Object(s.a)(a.slice(t+1)))}}))}},{key:"calculateDistance",value:function(t,e){var n=new d.Transform,a=this.state.width/2;n.translate(a,a),t.forEach((function(t){n.rotate(t.angle),n.translate(t.length,0)}));var i=n.point({x:0,y:0});return Math.hypot(e.x-i.x,e.y-i.y)}},{key:"render",value:function(){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"column"},i.a.createElement(k,{width:this.state.width,links:this.state.links,onClick:this.inverseKin}),i.a.createElement("div",{className:"row"},i.a.createElement("button",{onClick:this.addLink},"Add Link"),i.a.createElement("button",{onClick:this.removeLink},"Remove Last Link"))),i.a.createElement(v,{links:this.state.links,handleAngleInput:this.handleAngleInput,handleLengthInput:this.handleLengthInput}))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.fde01b67.chunk.js.map